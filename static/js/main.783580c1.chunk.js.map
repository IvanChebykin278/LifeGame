{"version":3,"sources":["Life.js","World.js","App.js","serviceWorker.js","index.js"],"names":["createMap","size","map","i","a","j","push","Life","this","isInit","x","y","Error","newMap","foo","fooFriends","neighbors","item","context","clearRect","step","fillRect","World","props","state","delay","isStart","iter","counter","isEdit","draw","width","height","mouse","life","mousedown","bind","mousemove","mouseup","onClear","onEdit","onNext","onStart","onInit","onChange","generator","next","setState","canvas","document","getElementById","getContext","setTimeout","event","name","getParameter","value","init","clearMap","pageX","target","offsetLeft","pageY","offsetTop","mapPoint","Math","floor","createFoo","style","display","id","onMouseDown","onMouseUp","onMouseMove","backgroundColor","border","margin","justifyContent","Form","FormGroup","title","FormItem","label","Input","disabled","Button","onClick","design","ButtonDesign","Reject","Accept","Component","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","ThemeProvider","withToastContainer","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.783580c1.chunk.js","sourcesContent":["\nconst createMap = (size) => {\n    const map = [];\n\n        for(let i = 0; i < size; i++) {\n            const a = [];\n\n            for(let j = 0; j < size; j++) {\n                a.push(0);\n            }\n\n            map.push(a);\n        }\n    \n    return map;\n}\n\nexport default class Life {\n\n    constructor() {\n        this.isInit = false;\n        this.map = [];\n        this.size = null;\n    }\n\n    init(size = 100) {\n        this.size = size;\n        this.map = createMap(this.size);\n        this.isInit = true;\n\n        return this;\n    }\n\n    createFoo(x, y) {\n        if(this.isInit) {\n            this.map[x > this.size - 1 ? this.size - 1 : x][y > this.size - 1 ? this.size - 1 : y] = 1;\n            return this;\n        } else {\n            throw Error('Игра не инициалзирована...');\n        }\n    }\n\n    next() {\n        if(this.isInit) {\n            const newMap = createMap(this.size);\n\n            for(let i = 0; i < this.size; i++) {\n                for(let j = 0; j < this.size; j++) {\n                    const foo = this.map[i][j];\n\n                    let fooFriends = 0;\n\n                    let neighbors = [];\n\n                    if(i > 0 && i < this.size - 1 && j > 0 && j < this.size - 1) {\n                        neighbors = [\n                            this.map[i - 1][j - 1],\n                            this.map[i - 1][j],\n                            this.map[i - 1][j + 1],\n                            this.map[i][j - 1],\n                            this.map[i][j + 1],\n                            this.map[i + 1][j - 1],\n                            this.map[i + 1][j],\n                            this.map[i + 1][j + 1]\n                        ];\n                    }\n\n                    if(i === 0 && j > 0 && j < this.size - 1) {\n                        neighbors = [\n                            this.map[i][j - 1],\n                            this.map[i][j + 1],\n                            this.map[i + 1][j - 1],\n                            this.map[i + 1][j],\n                            this.map[i + 1][j + 1]\n                        ];\n                    }\n\n                    if(i === 0 && j === 0) {\n                        neighbors = [\n                            this.map[i][j + 1],\n                            this.map[i + 1][j],\n                            this.map[i + 1][j + 1]\n                        ];\n                    }\n\n                    if(i === 0 && j === this.size - 1) {\n                        neighbors = [\n                            this.map[i][j - 1],\n                            this.map[i + 1][j - 1],\n                            this.map[i + 1][j]\n                        ];\n                    }\n\n                    if(j === 0 && i > 0 && i < this.size - 1) {\n                        neighbors = [\n                            this.map[i - 1][j],\n                            this.map[i - 1][j + 1],\n                            this.map[i][j + 1],\n                            this.map[i + 1][j],\n                            this.map[i + 1][j + 1]\n                        ];\n                    }\n\n                    if(j === 0 && i === this.size - 1) {\n                        neighbors = [\n                            this.map[i - 1][j],\n                            this.map[i - 1][j + 1],\n                            this.map[i][j + 1]\n                        ];\n                    }\n\n                    if(i === this.size - 1 && j > 0 && j < this.size - 1) {\n                        neighbors = [\n                            this.map[i - 1][j - 1],\n                            this.map[i - 1][j],\n                            this.map[i - 1][j + 1],\n                            this.map[i][j - 1],\n                            this.map[i][j + 1]\n                        ];\n                    }\n\n                    if(i === this.size - 1 && j === this.size - 1) {\n                        neighbors = [\n                            this.map[i - 1][j - 1],\n                            this.map[i - 1][j],\n                            this.map[i][j - 1]\n                        ];\n                    }\n\n                    if(j === this.size - 1 && i > 0 && i < this.size - 1) {\n                        neighbors = [\n                            this.map[i - 1][j - 1],\n                            this.map[i - 1][j],\n                            this.map[i][j - 1],\n                            this.map[i + 1][j - 1],\n                            this.map[i + 1][j]\n                        ];\n                    }\n\n                    neighbors.map(item => {\n                        if(item === 1) fooFriends++;\n                    }); \n\n                    if(foo === 1) {\n\n                        if(fooFriends >= 2 && fooFriends <= 3) newMap[i][j] = 1;\n                        if(fooFriends > 3) newMap[i][j] = 0;\n                        if(fooFriends < 2) newMap[i][j] = 0;\n\n                    } else {\n                        if(fooFriends === 3) newMap[i][j] = 1;\n                    }\n\n                }\n            }\n\n            this.map = newMap;\n\n            return this;\n        } else {\n            throw Error('Игра не инициалзирована...');\n        }\n    }\n\n    clearMap() {\n        if(this.isInit) {\n            this.map = createMap(this.size);\n\n            return this;\n        } else {\n            throw Error('Игра не инициалзирована...');\n        }\n    }\n\n    draw(context) {\n        if(this.isInit) {\n            context.clearRect(0, 0, 500, 500);\n\n            const step = 500 / this.size;\n\n            for(let i = 0; i < this.size; i++) {\n                for(let j = 0; j < this.size; j++) {\n\n                    if(this.map[i][j] === 1) {\n                        context.fillRect(i * step, j * step, step, step);\n                    }\n\n                }\n            }\n\n            return this;\n        } else {\n            throw Error('Игра не инициалзирована...');\n        }\n    }\n}","import React, { Component } from 'react';\nimport \"@ui5/webcomponents/dist/features/InputElementsFormSupport.js\";\n\nimport Life from './Life';\n\nimport { Form } from '@ui5/webcomponents-react/lib/Form';\nimport { FormGroup } from '@ui5/webcomponents-react/lib/FormGroup';\nimport { FormItem } from '@ui5/webcomponents-react/lib/FormItem';\n\nimport { Input } from '@ui5/webcomponents-react/lib/Input';\nimport { Button } from '@ui5/webcomponents-react/lib/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/lib/ButtonDesign';\n\nclass World extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            delay: 50,\n            isInit: false,\n            size: 500,\n            isStart: false,\n            iter: 10000000,\n            counter: 0,\n            isEdit: false,\n            draw: false,\n            width: null,\n            height: null,\n            context: null,\n            mouse: { x: 0, y: 0},\n        };\n\n        this.life = new Life();\n\n        this.mousedown = this.mousedown.bind(this);\n        this.mousemove = this.mousemove.bind(this);\n        this.mouseup = this.mouseup.bind(this);\n\n        this.onClear = this.onClear.bind(this);\n        this.onEdit = this.onEdit.bind(this);\n        this.onNext = this.onNext.bind(this);\n        this.onStart = this.onStart.bind(this);\n        this.onInit = this.onInit.bind(this);\n        this.onChange = this.onChange.bind(this);\n\n        this.generator = this.generator.bind(this);\n    }\n\n    generator() {\n        this.life.next().draw(this.state.context);\n        this.setState({\n            ...this.state,\n            counter: this.state.counter + 1\n        });\n    }\n\n    componentDidMount() {\n        const canvas = document.getElementById('world');\n        const context = canvas.getContext('2d');\n\n        this.setState({\n            ...this.state,\n            width: canvas.width,\n            height: canvas.height,\n            context: context\n        });\n    }\n\n    componentDidUpdate() {\n        if(this.state.isStart && this.state.iter > this.state.counter) { \n            setTimeout(this.generator, this.state.delay);\n        }\n    }\n\n    onChange(event) {\n        const name = event.getParameter('name');\n        const value = event.getParameter('value');\n\n        this.setState({\n            ...this.state,\n            [name]: value\n        });\n    }\n\n    onInit() {\n\n        this.life.init(this.state.size).clearMap();\n\n        this.setState({\n            ...this.state,\n            isInit: !this.state.isInit\n        });\n    }\n\n    onClear() {\n        this.state.context.clearRect(0, 0, this.state.width, this.state.height);\n        this.life.clearMap();\n        this.setState({\n            ...this.state,\n            isStart: false,\n            counter: 0\n        });\n    }\n\n    onEdit() {\n        this.setState({\n            ...this.state,\n            isEdit: !this.state.isEdit\n        });\n    }\n\n    onStart() {\n        this.setState({\n            ...this.state,\n            isStart: !this.state.isStart\n        });\n    }\n\n    onNext() {\n        this.life.next();\n        this.life.draw(this.state.context);\n    }\n\n    mousedown(event) {\n        if(this.state.isEdit) {\n            const step = 500 / this.state.size;\n            const mouse = {\n                x: event.pageX - event.target.offsetLeft,\n                y: event.pageY - event.target.offsetTop\n            };\n            const mapPoint = {\n                x: Math.floor(mouse.x / step) * step,\n                y: Math.floor(mouse.y / step) * step\n            }\n\n            this.state.context.fillRect(mapPoint.x, mapPoint.y, step, step);\n\n            //this.state.context.beginPath();\n            //this.state.context.moveTo(mouse.x, mouse.y);\n\n            this.life.createFoo(Math.floor(mouse.x / step), Math.floor(mouse.y / step));\n\n            this.setState({\n                ...this.state,\n                mouse: mapPoint,\n                draw: true\n            });\n        }\n    }\n\n    mousemove(event) {\n        if(this.state.draw && this.state.isEdit) {\n            const step = 500 / this.state.size;\n            const mouse = {\n                x: event.pageX - event.target.offsetLeft,\n                y: event.pageY - event.target.offsetTop\n            };\n            const mapPoint = {\n                x: Math.floor(mouse.x / step) * step,\n                y: Math.floor(mouse.y / step) * step\n            }\n\n            this.state.context.fillRect(mapPoint.x, mapPoint.y, step, step);\n\n            //this.state.context.lineTo(mouse.x, mouse.y);\n            //this.state.context.stroke();\n\n            this.life.createFoo(Math.floor(mouse.x / step), Math.floor(mouse.y / step));\n\n            this.setState({\n                ...this.state,\n                mouse: mapPoint\n            });\n        }\n    }\n\n    mouseup(event) {\n        if(this.state.isEdit) {\n            const step = 500 / this.state.size;\n            const mouse = {\n                x: event.pageX - event.target.offsetLeft,\n                y: event.pageY - event.target.offsetTop\n            };\n            const mapPoint = {\n                x: Math.floor(mouse.x / step) * step,\n                y: Math.floor(mouse.y / step) * step\n            }\n\n            this.state.context.fillRect(mapPoint.x, mapPoint.y, step, step);\n\n            //this.state.context.lineTo(mouse.x, mouse.y);\n            //this.state.context.stroke();\n            //this.state.context.closePath();\n\n            this.life.createFoo(Math.floor(mouse.x / step), Math.floor(mouse.y / step));\n\n            this.setState({\n                ...this.setState,\n                mouse: mapPoint,\n                draw: false\n            });\n        }\n    }\n\n    render() {\n\n        const buttonStyle = {\n            marginTop: '5px'\n        }\n\n        return (\n            <div style={{\n                display: 'flex'\n            }}>\n                <canvas \n                    id='world'\n                    width='500'\n                    height='500'\n                    onMouseDown={this.mousedown}\n                    onMouseUp={this.mouseup}\n                    onMouseMove={this.mousemove}\n                    style={{\n                        backgroundColor: '#eee',\n                        border: '1px solid #ccc',\n                        margin: '10px'\n                    }} />\n                <div style={{\n                    display: 'flex',\n                    margin: '10px',\n                    justifyContent: 'space-between'\n                }}>\n                    <Form style={{\n                        width: '300px'\n                    }}>\n                        <FormGroup title='Настройка карты'>\n                            <FormItem label='Размер'>\n                                <Input\n                                    onChange={this.onChange}\n                                    name='size'\n                                    disabled={this.state.isInit} \n                                    value={this.state.size} />\n                            </FormItem>\n                        </FormGroup>\n                        <FormGroup title='Системные настройки'>\n                            <FormItem label='Задержка'>\n                                <Input\n                                    onChange={this.onChange}\n                                    name='delay'\n                                    disabled={this.state.isInit} \n                                    value={this.state.delay} />\n                            </FormItem>\n                        </FormGroup>\n                        <FormGroup title='Действия'>\n                            <Button\n                                disabled={this.state.isStart || this.state.isEdit}\n                                onClick={this.onInit}\n                            >\n                                {this.state.isInit ? 'Сбрость' : 'Сохранить'} настройки\n                            </Button>\n                            <Button\n                                disabled={!this.state.isInit || this.state.isEdit}\n                                onClick={this.onStart}\n                                design={this.state.isStart ? ButtonDesign.Reject : ButtonDesign.Accept}\n                            >\n                                {this.state.isStart ? 'Остановать' : 'Начать'} симуляцию\n                            </Button>\n                            <Button\n                                disabled={!this.state.isInit || this.state.isStart}\n                                onClick={this.onEdit}\n                            >\n                                {this.state.isEdit ? 'Завершить' : 'Начать'} рисование\n                            </Button>\n                            <Button\n                                disabled={!this.state.isInit}\n                                onClick={this.onClear}\n                            >\n                                Отчистить\n                            </Button>\n                        </FormGroup>\n                    </Form>\n                </div>\n                <span>x: {this.state.mouse.x} y: {this.state.mouse.y}</span>\n            </div>\n        )\n    }\n}\n\nexport default World;\n\n","import React from 'react';\nimport './App.css';\n\nimport World from './World';\n\nfunction App() {\n  return (\n    <div>\n      <World />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { ThemeProvider } from '@ui5/webcomponents-react/lib/ThemeProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider withToastContainer>\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}